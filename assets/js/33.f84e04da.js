(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{202:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("You will find here some configuration examples of Traefik.")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),a("p",[t._v("Note that we can either give path to certificate file or directly the file content itself ("),a("router-link",{attrs:{to:"/user-guide/kv-config/#upload-the-configuration-in-the-key-value-store"}},[t._v("like in this TOML example")]),t._v(").")],1),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),a("p",[t._v("Traefik generates these certificates when it starts and it needs to be restart if new domains are added.")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._m(14),t._v(" "),a("p",[t._v("Traefik generates these certificates when it starts.")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),a("p",[t._v("DNS challenge needs environment variables to be executed.\nThese variables have to be set on the machine/container that host Traefik.")]),t._v(" "),a("p",[t._v("These variables are described "),a("router-link",{attrs:{to:"/configuration/acme/#provider"}},[t._v("in this section")]),t._v(".")],1),t._v(" "),t._m(22),t._v(" "),t._m(23),a("p",[t._v("DNS challenge needs environment variables to be executed.\nThese variables have to be set on the machine/container that host Traefik.")]),t._v(" "),a("p",[t._v("These variables are described "),a("router-link",{attrs:{to:"/configuration/acme/#provider"}},[t._v("in this section")]),t._v(".")],1),t._v(" "),a("p",[t._v("More information about wildcard certificates are available "),a("router-link",{attrs:{to:"/configuration/acme/#wildcard-domains"}},[t._v("in this section")]),t._v(".")],1),t._v(" "),t._m(24),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),a("p",[t._v("Before you use Let's Encrypt in a Traefik cluster, take a look to "),a("a",{attrs:{href:"/user-guide/kv-config"}},[t._v("the key-value store explanations")]),t._v(" and more precisely at "),a("router-link",{attrs:{to:"/user-guide/kv-config/#store-configuration-in-key-value-store"}},[t._v("this section")]),t._v(", which will describe how to migrate from a acme local storage "),a("em",[t._v("(acme.json file)")]),t._v(" to a key-value store configuration.")],1),t._v(" "),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._m(35),t._v(" "),t._m(36),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._m(40),t._v(" "),t._m(41),t._v(" "),a("p",[t._v("The double sign "),a("code",[t._v("$$")]),t._v(" are variables managed by the docker compose file ("),a("a",{attrs:{href:"https://docs.docker.com/compose/compose-file/#variable-substitution",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation"),a("OutboundLink")],1),t._v(").")]),t._v(" "),t._m(42)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[this._v("#")]),this._v(" Examples")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"http-only"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-only","aria-hidden":"true"}},[this._v("#")]),this._v(" HTTP only")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("defaultEntryPoints")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["http"]')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"http-https-with-sni"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-https-with-sni","aria-hidden":"true"}},[this._v("#")]),this._v(" HTTP + HTTPS (with SNI)")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("defaultEntryPoints")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["http", "https"]')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [[entryPoints.https.tls.certificates]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      certFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "integration/fixtures/https/snitest.com.cert"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      keyFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "integration/fixtures/https/snitest.com.key"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [[entryPoints.https.tls.certificates]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      certFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "integration/fixtures/https/snitest.org.cert"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      keyFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "integration/fixtures/https/snitest.org.key"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"http-redirect-on-https"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-redirect-on-https","aria-hidden":"true"}},[this._v("#")]),this._v(" HTTP redirect on HTTPS")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("defaultEntryPoints")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["http", "https"]')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.http.redirect]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [[entryPoints.https.tls.certificates]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      certFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "examples/traefik.crt"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      keyFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "examples/traefik.key"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("pre",[s("code",[this._v("Please note that `regex` and `replacement` do not have to be set in the `redirect` structure if an entrypoint is defined for the redirection (they will not be used in this case)\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"let-s-encrypt-support"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#let-s-encrypt-support","aria-hidden":"true"}},[this._v("#")]),this._v(" Let's Encrypt support")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"basic-example-with-http-challenge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic-example-with-http-challenge","aria-hidden":"true"}},[this._v("#")]),this._v(" Basic example with HTTP challenge")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("email")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test@traefik.io"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("storage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "acme.json"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("caServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https://acme-staging-v02.api.letsencrypt.org/directory"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [acme.httpChallenge]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local1.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local1.com", "test2.local1.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local2.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local2.com", "test2x.local2.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local3.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local4.com"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("This configuration allows generating Let's Encrypt certificates (thanks to "),s("code",[this._v("HTTP-01")]),this._v(" challenge) for the four domains "),s("code",[this._v("local[1-4].com")]),this._v(" with described SANs.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"onhostrule-option-with-http-challenge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onhostrule-option-with-http-challenge","aria-hidden":"true"}},[this._v("#")]),this._v(" onHostRule option (with HTTP challenge)")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("email")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test@traefik.io"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("storage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "acme.json"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("onHostRule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("caServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https://acme-staging-v02.api.letsencrypt.org/directory"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [acme.httpChallenge]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local1.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local1.com", "test2.local1.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local2.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local2.com", "test2x.local2.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local3.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local4.com"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("This configuration allows generating Let's Encrypt certificates (thanks to "),s("code",[this._v("HTTP-01")]),this._v(" challenge) for the four domains "),s("code",[this._v("local[1-4].com")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If a backend is added with a "),s("code",[this._v("onHost")]),this._v(" rule, Traefik will automatically generate the Let's Encrypt certificate for the new domain (for frontends wired on the "),s("code",[this._v("acme.entryPoint")]),this._v(").")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"ondemand-option-with-http-challenge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ondemand-option-with-http-challenge","aria-hidden":"true"}},[this._v("#")]),this._v(" OnDemand option (with HTTP challenge)")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("email")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test@traefik.io"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("storage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "acme.json"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("onDemand")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("caServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https://acme-staging-v02.api.letsencrypt.org/directory"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [acme.httpChallenge]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("This configuration allows generating a Let's Encrypt certificate (thanks to "),s("code",[this._v("HTTP-01")]),this._v(" challenge) during the first HTTPS request on a new domain.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("pre",[s("code",[this._v("This option simplifies the configuration but :\n\n* TLS handshakes will be slow when requesting a hostname certificate for the first time, which can lead to DDoS attacks.\n* Let's Encrypt have rate limiting: https://letsencrypt.org/docs/rate-limits\n\nThat's why, it's better to use the `onHostRule` option if possible.\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"dns-challenge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns-challenge","aria-hidden":"true"}},[this._v("#")]),this._v(" DNS challenge")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("email")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test@traefik.io"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("storage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "acme.json"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("caServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https://acme-staging-v02.api.letsencrypt.org/directory"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [acme.dnsChallenge]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  provider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "digitalocean" # DNS Provider name (cloudflare, OVH, gandi...)')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  delayBeforeCheck")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 0")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local1.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local1.com", "test2.local1.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local2.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local2.com", "test2x.local2.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local3.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local4.com"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"dns-challenge-with-wildcard-domains"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns-challenge-with-wildcard-domains","aria-hidden":"true"}},[this._v("#")]),this._v(" DNS challenge with wildcard domains")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("email")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test@traefik.io"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("storage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "acme.json"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("caServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https://acme-staging-v02.api.letsencrypt.org/directory"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [acme.dnsChallenge]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  provider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "digitalocean" # DNS Provider name (cloudflare, OVH, gandi...)')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  delayBeforeCheck")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 0")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "*.local1.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local2.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local2.com", "test2x.local2.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "*.local3.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "*.local4.com"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"onhostrule-option-and-provided-certificates-with-http-challenge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onhostrule-option-and-provided-certificates-with-http-challenge","aria-hidden":"true"}},[this._v("#")]),this._v(" onHostRule option and provided certificates (with HTTP challenge)")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [[entryPoints.https.tls.certificates]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      certFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "examples/traefik.crt"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      keyFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "examples/traefik.key"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("email")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test@traefik.io"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("storage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "acme.json"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("onHostRule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("caServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http://172.18.0.1:4000/directory"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [acme.httpChallenge]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Traefik will only try to generate a Let's encrypt certificate (thanks to "),s("code",[this._v("HTTP-01")]),this._v(" challenge) if the domain cannot be checked by the provided certificates.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"cluster-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cluster-mode","aria-hidden":"true"}},[this._v("#")]),this._v(" Cluster mode")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites","aria-hidden":"true"}},[this._v("#")]),this._v(" Prerequisites")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("email")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test@traefik.io"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("storage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "traefik/acme/account"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("caServer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http://172.18.0.1:4000/directory"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[acme.httpChallenge]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    entryPoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local1.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local1.com", "test2.local1.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local2.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  sans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["test1.local2.com", "test2x.local2.com"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local3.com"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[[acme.domains]")]),t._v("]\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "local4.com"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[consul]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  endpoint")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "127.0.0.1:8500"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  watch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  prefix")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "traefik"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("This configuration allows to use the key "),s("code",[this._v("traefik/acme/account")]),this._v(" to get/set Let's Encrypt certificates content.\nThe "),s("code",[this._v("consul")]),this._v(" provider contains the configuration.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("pre",[s("code",[this._v("It's possible to use others key-value store providers as described [here](/user-guide/kv-config/#key-value-store-configuration).\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"override-entrypoints-in-frontends"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#override-entrypoints-in-frontends","aria-hidden":"true"}},[this._v("#")]),this._v(" Override entrypoints in frontends")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[frontends]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend1]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.routes.test_1]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Host:test.localhost"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend2]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend1"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  passHostHeader")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  entrypoints")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["https"] # overrides defaultEntryPoints')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend2.routes.test_1]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Host:{subdomain:[a-z]+}.localhost"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend3]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  entrypoints")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["http", "https"] # overrides defaultEntryPoints')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  rule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Path:/test"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"override-the-traefik-http-server-idletimeout-and-or-throttle-configurations-from-re-loading-too-quickly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#override-the-traefik-http-server-idletimeout-and-or-throttle-configurations-from-re-loading-too-quickly","aria-hidden":"true"}},[this._v("#")]),this._v(" Override the Traefik HTTP server idleTimeout and/or throttle configurations from re-loading too quickly")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("providersThrottleDuration")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "5s"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[respondingTimeouts]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("idleTimeout")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "360s"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"using-labels-in-docker-compose-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-labels-in-docker-compose-yml","aria-hidden":"true"}},[this._v("#")]),this._v(" Using labels in docker-compose.yml")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Pay attention to the "),s("strong",[this._v("labels")]),this._v(" section:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('home:\nimage: abiosoft/caddy:0.10.14\nnetworks:\n  - ntw_front\nvolumes:\n  - ./www/home/srv/:/srv/\ndeploy:\n  mode: replicated\n  replicas: 2\n  #placement:\n  #  constraints: [node.role==manager]\n  restart_policy:\n    condition: on-failure\n    max_attempts: 5\n  resources:\n    limits:\n      cpus: \'0.20\'\n      memory: 9M\n    reservations:\n      cpus: \'0.05\'\n      memory: 9M\n  labels:\n  - "traefik.frontend.rule=PathPrefixStrip:/"\n  - "traefik.backend=home"\n  - "traefik.port=2015"\n  - "traefik.weight=10"\n  - "traefik.enable=true"\n  - "traefik.passHostHeader=true"\n  - "traefik.docker.network=ntw_front"\n  - "traefik.frontend.entryPoints=http"\n  - "traefik.backend.loadbalancer.swarm=true"\n  - "traefik.backend.loadbalancer.method=drr"\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Something more tricky using "),s("code",[this._v("regex")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In this case a slash is added to "),s("code",[this._v("siteexample.io/portainer")]),this._v(" and redirect to "),s("code",[this._v("siteexample.io/portainer/")]),this._v(". For more details: https://github.com/containous/traefik/issues/563")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('portainer:\nimage: portainer/portainer:1.16.5\nnetworks:\n  - ntw_front\nvolumes:\n  - /var/run/docker.sock:/var/run/docker.sock\ndeploy:\n  mode: replicated\n  replicas: 1\n  placement:\n    constraints: [node.role==manager]\n  restart_policy:\n    condition: on-failure\n    max_attempts: 5\n  resources:\n    limits:\n      cpus: \'0.33\'\n      memory: 20M\n    reservations:\n      cpus: \'0.05\'\n      memory: 10M\n  labels:\n    - "traefik.frontend.rule=PathPrefixStrip:/portainer"\n    - "traefik.backend=portainer"\n    - "traefik.port=9000"\n    - "traefik.weight=10"\n    - "traefik.enable=true"\n    - "traefik.passHostHeader=true"\n    - "traefik.docker.network=ntw_front"\n    - "traefik.frontend.entryPoints=http"\n    - "traefik.backend.loadbalancer.swarm=true"\n    - "traefik.backend.loadbalancer.method=drr"\n    # https://github.com/containous/traefik/issues/563#issuecomment-421360934\n    - "traefik.frontend.redirect.regex=^(.*)/portainer$$"\n    - "traefik.frontend.redirect.replacement=$$1/portainer/"\n    - "traefik.frontend.rule=PathPrefix:/portainer;ReplacePathRegex: ^/portainer/(.*) /$$1"\n')])])])}],!1,null,null,null);s.default=n.exports}}]);