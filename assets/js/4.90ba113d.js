(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{198:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("Let's take our example from the "),s("router-link",{attrs:{to:"/#overview"}},[t._v("overview")]),t._v(" again:")],1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("Let's zoom on Traefik and have an overview of its internal architecture:")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("Entrypoints are the network entry points into Traefik.\nThey can be defined using:")]),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("Here is an example of entrypoints definition:")]),t._v(" "),t._m(9),t._m(10),t._v(" "),s("p",[t._v("And here is another example with client certificate authentication:")]),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._v(" "),s("p",[t._v("A frontend consists of a set of rules that determine how incoming requests are forwarded from an entrypoint to a backend.")]),t._v(" "),s("p",[t._v("Rules may be classified in one of two groups: Modifiers and matchers.")]),t._v(" "),t._m(14),t._v(" "),s("p",[t._v("Modifier rules only modify the request. They do not have any impact on routing decisions being made.")]),t._v(" "),s("p",[t._v("Following is the list of existing modifier rules:")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("Matcher rules determine if a particular request should be forwarded to a backend.")]),t._v(" "),s("p",[t._v("The associativity rule is the following:")]),t._v(" "),t._m(17),t._v(" "),s("p",[t._v("Following is the list of existing matcher rules along with examples:")]),t._v(" "),t._m(18),t._v(" "),s("p",[t._v("In order to use regular expressions with Host and Path matchers, you must declare an arbitrarily named variable followed by the colon-separated regular expression, all enclosed in curly braces. Any pattern supported by "),s("a",{attrs:{href:"https://golang.org/pkg/regexp/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go's regexp package"),s("OutboundLink")],1),t._v(" may be used (example: "),s("code",[t._v("/posts/{id:[0-9]+}")]),t._v(").")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("The variable has no special meaning; however, it is required by the "),s("a",{attrs:{href:"https://github.com/gorilla/mux",target:"_blank",rel:"noopener noreferrer"}},[t._v("gorilla/mux"),s("OutboundLink")],1),t._v(" dependency which embeds the regular expression and defines the syntax.")])]),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),s("p",[t._v("This section explains when to use the various path matchers.")]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),s("p",[t._v("Instead of distinguishing your backends by path only, you can add a Host matcher to the mix.\nThat way, namespacing of your backends happens on the basis of hosts in addition to paths.")]),t._v(" "),t._m(24),t._v(" "),s("p",[t._v("Here is an example of frontends definition:")]),t._v(" "),t._m(25),t._m(26),t._v(" "),t._m(27),t._v(" "),s("p",[t._v("As seen in the previous example, you can combine multiple rules.\nIn TOML file, you can use multiple routes:")]),t._v(" "),t._m(28),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._m(32),t._v(" "),t._m(33),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),s("p",[t._v("You can customize priority by frontend. The priority value override the rule length during sorting:")]),t._v(" "),t._m(42),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),s("p",[t._v("!!! warning\nIf the custom header name is the same as one header name of the request or response, it will be replaced.")]),t._v(" "),t._m(46),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._m(50),t._v(" "),s("p",[t._v("Security related headers (HSTS headers, SSL redirection, Browser XSS filter, etc) can be added and configured per frontend in a similar manner to the custom headers above.\nThis functionality allows for some easy security features to quickly be set.")]),t._v(" "),s("p",[t._v("An example of some of the security headers:")]),t._v(" "),t._m(51),t._m(52),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("The detailed documentation for those security headers can be found in "),s("a",{attrs:{href:"https://github.com/unrolled/secure#available-options",target:"_blank",rel:"noopener noreferrer"}},[t._v("unrolled/secure"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),t._m(53),t._v(" "),s("p",[t._v("A backend is responsible to load-balance the traffic coming from one or more frontends to a set of http servers.")]),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),s("p",[t._v("Here is an example of backends and servers definition:")]),t._v(" "),t._m(57),t._m(58),t._v(" "),t._m(59),t._v(" "),s("p",[t._v("Various methods of load-balancing are supported:")]),t._v(" "),t._m(60),t._v(" "),t._m(61),t._v(" "),s("p",[t._v("A circuit breaker can also be applied to a backend, preventing high loads on failing servers.\nInitial state is Standby. CB observes the statistics and does not modify the request.\nIn case the condition matches, CB enters Tripped state, where it responds with predefined code or redirects to another frontend.\nOnce Tripped timer expires, CB enters Recovering state and resets all stats.\nIn case the condition does not match and recovery timer expires, CB enters Standby state.")]),t._v(" "),s("p",[t._v("It can be configured using:")]),t._v(" "),t._m(62),t._v(" "),s("p",[t._v("For example:")]),t._v(" "),t._m(63),t._v(" "),s("p",[t._v("Here is an example of backends and servers definition:")]),t._v(" "),t._m(64),t._m(65),t._v(" "),t._m(66),t._v(" "),s("p",[t._v("To proactively prevent backends from being overwhelmed with high load, a maximum connection limit can also be applied to each backend.")]),t._v(" "),t._m(67),t._v(" "),s("p",[t._v("For example:")]),t._v(" "),t._m(68),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._m(73),t._v(" "),s("p",[t._v("A health check can be configured in order to remove a backend from LB rotation as long as it keeps returning HTTP status codes other than "),s("code",[t._v("2xx")]),t._v(" or "),s("code",[t._v("3xx")]),t._v(" to HTTP GET requests periodically carried out by Traefik.\nThe check is defined by a path appended to the backend URL and an interval specifying how often the health check should be executed (the default being 30 seconds.)\nEach backend must respond to the health check within a timeout duration (the default being 5 seconds.)\nInterval and timeout are to be given in a format understood by "),s("a",{attrs:{href:"https://golang.org/pkg/time/#ParseDuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("time.ParseDuration"),s("OutboundLink")],1),t._v(".\nThe interval must be greater than the timeout. If configuration doesn't reflect this, the interval will be set to timeout + 1 second.\nBy default, the port of the backend server is used, however, this may be overridden.")]),t._v(" "),t._m(74),t._v(" "),s("p",[t._v("For example:")]),t._v(" "),t._m(75),s("p",[t._v("To use a different port for the health check:")]),t._v(" "),t._m(76),s("p",[t._v("To use a different scheme for the health check:")]),t._v(" "),t._m(77),s("p",[t._v("Additional http headers and hostname to health check request can be specified, for instance:")]),t._v(" "),t._m(78),t._m(79),t._v(" "),s("p",[t._v("Traefik's configuration has two parts:")]),t._v(" "),t._m(80),t._v(" "),t._m(81),t._v(" "),s("p",[t._v("The static configuration is the global configuration which is setting up connections to configuration backends and entrypoints.")]),t._v(" "),s("p",[t._v("Traefik can be configured using many configuration sources with the following precedence order.\nEach item takes precedence over the item below it:")]),t._v(" "),s("ul",[s("li",[s("router-link",{attrs:{to:"/basics.html#key-value-stores"}},[t._v("Key-value store")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/basics.html#arguments"}},[t._v("Arguments")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/basics.html#configuration-file"}},[t._v("Configuration file")])],1),t._v(" "),s("li",[t._v("Default")])]),t._v(" "),s("p",[t._v("It means that arguments override configuration file, and key-value store overrides arguments.")]),t._v(" "),t._m(82),t._v(" "),t._m(83),t._v(" "),t._m(84),t._v(" "),t._m(85),t._v(" "),t._m(86),t._v(" "),t._m(87),s("p",[t._v("Please refer to the "),s("router-link",{attrs:{to:"/configuration/commons.html"}},[t._v("global configuration")]),t._v(" section to get documentation on it.")],1),t._v(" "),t._m(88),t._v(" "),s("p",[t._v("Each argument (and command) is described in the help section:")]),t._v(" "),t._m(89),s("p",[t._v("Note that all default values will be displayed as well.")]),t._v(" "),t._m(90),t._v(" "),s("p",[t._v("Traefik supports several Key-value stores:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://consul.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Consul"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://coreos.com/etcd/",target:"_blank",rel:"noopener noreferrer"}},[t._v("etcd"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zookeeper.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ZooKeeper"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/boltdb/bolt",target:"_blank",rel:"noopener noreferrer"}},[t._v("boltdb"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("Please refer to the "),s("router-link",{attrs:{to:"/user-guide/kv-config.html"}},[t._v("User Guide Key-value store configuration")]),t._v(" section to get documentation on it.")],1),t._v(" "),t._m(91),t._v(" "),s("p",[t._v("The dynamic configuration concerns :")]),t._v(" "),s("ul",[s("li",[s("router-link",{attrs:{to:"/basics.html#frontends"}},[t._v("Frontends")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/basics.html#backends"}},[t._v("Backends")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/basics.html#servers"}},[t._v("Servers")])],1),t._v(" "),s("li",[t._v("HTTPS Certificates")])]),t._v(" "),t._m(92),t._v(" "),t._m(93),t._v(" "),s("p",[t._v("Please refer to the "),s("router-link",{attrs:{to:"/configuration/commons.html"}},[t._v("configuration backends")]),t._v(" section to get documentation on it.")],1),t._v(" "),t._m(94),t._v(" "),t._m(95),t._v(" "),s("p",[t._v("Usage:")]),t._v(" "),t._m(96),s("p",[t._v("List of Traefik available commands with description :")]),t._v(" "),s("ul",[t._m(97),t._v(" "),s("li",[s("code",[t._v("storeconfig")]),t._v(" : Store the static Traefik configuration into a Key-value stores. Please refer to the "),s("router-link",{attrs:{to:"/user-guide/kv-config.html#store-configuration-in-key-value-store"}},[t._v("Store Traefik configuration")]),t._v(" section to get documentation on it.")],1),t._v(" "),t._m(98),t._v(" "),t._m(99)]),t._v(" "),s("p",[t._v("Each command may have related flags.")]),t._v(" "),s("p",[t._v("All those related flags will be displayed with :")]),t._v(" "),t._m(100),s("p",[t._v("Each command is described at the beginning of the help section:")]),t._v(" "),t._m(101),t._m(102),t._v(" "),s("p",[t._v("Here is the easiest way to submit a pre-filled issue on "),s("a",{attrs:{href:"https://github.com/containous/traefik",target:"_blank",rel:"noopener noreferrer"}},[t._v("Traefik GitHub"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(103),s("p",[t._v("Watch "),s("a",{attrs:{href:"https://www.youtube.com/watch?v=Lyz62L8m93I",target:"_blank",rel:"noopener noreferrer"}},[t._v("this demo"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(104),t._v(" "),t._m(105),t._v(" "),s("p",[t._v("This can be used with Docker "),s("a",{attrs:{href:"https://docs.docker.com/engine/reference/builder/#healthcheck",target:"_blank",rel:"noopener noreferrer"}},[t._v("HEALTHCHECK"),s("OutboundLink")],1),t._v(" instruction or any other health check orchestration mechanism.")]),t._v(" "),t._m(106),t._v(" "),t._m(107),t._m(108),t._m(109),t._v(" "),t._m(110),t._v(" "),s("p",[t._v("You can read the public proposal on this topic "),s("a",{attrs:{href:"https://github.com/containous/traefik/issues/2369",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(111),t._v(" "),s("p",[t._v("In order to help us learn more about how Traefik is being used and improve it, we collect anonymous usage statistics from running instances.\nThose data help us prioritize our developments and focus on what's more important (for example, which configuration backend is used and which is not used).")]),t._v(" "),t._m(112),t._v(" "),s("p",[t._v("Once a day (the first call begins 10 minutes after the start of Traefik), we collect:")]),t._v(" "),t._m(113),t._v(" "),t._m(114),t._v(" "),t._m(115),t._v(" "),t._m(116),t._v(" "),t._m(117),t._v(" "),t._m(118),t._m(119),t._v(" "),t._m(120),t._m(121),t._v(" "),s("p",[t._v("If you want to dig into more details, here is the source code of the collecting system: "),s("a",{attrs:{href:"https://github.com/containous/traefik/blob/master/collector/collector.go",target:"_blank",rel:"noopener noreferrer"}},[t._v("collector.go"),s("OutboundLink")],1)]),t._v(" "),t._m(122),t._v(" "),t._m(123),t._v(" "),s("p",[t._v("You can enable the collecting system by:")]),t._v(" "),t._m(124),t._v(" "),t._m(125),t._m(126),t._v(" "),t._m(127)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"basics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#basics","aria-hidden":"true"}},[this._v("#")]),this._v(" Basics")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"concepts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#concepts","aria-hidden":"true"}},[this._v("#")]),this._v(" Concepts")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("Imagine that you have deployed a bunch of microservices on your infrastructure. You probably used a service registry (like etcd or consul) and/or an orchestrator (swarm, Mesos/Marathon) to manage all these services.\nIf you want your users to access some of your microservices from the Internet, you will have to use a reverse proxy and configure it using virtual hosts or prefix paths:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("blockquote",[s("ul",[s("li",[t._v("domain "),s("code",[t._v("api.domain.com")]),t._v(" will point the microservice "),s("code",[t._v("api")]),t._v(" in your private network")]),t._v(" "),s("li",[t._v("path "),s("code",[t._v("domain.com/web")]),t._v(" will point the microservice "),s("code",[t._v("web")]),t._v(" in your private network")]),t._v(" "),s("li",[t._v("domain "),s("code",[t._v("backoffice.domain.com")]),t._v(" will point the microservices "),s("code",[t._v("backoffice")]),t._v(" in your private network, load-balancing between your multiple instances")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[e("img",{attrs:{src:"img/architecture.png",alt:"Architecture"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"img/internal.png",alt:"Architecture"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Incoming requests end on "),s("a",{attrs:{href:"#entrypoints"}},[t._v("entrypoints")]),t._v(", as the name suggests, they are the network entry points into Traefik (listening port, SSL, traffic redirection...).")]),t._v(" "),s("li",[t._v("Traffic is then forwarded to a matching "),s("a",{attrs:{href:"#frontends"}},[t._v("frontend")]),t._v(". A frontend defines routes from "),s("a",{attrs:{href:"#entrypoints"}},[t._v("entrypoints")]),t._v(" to "),s("a",{attrs:{href:"#backends"}},[t._v("backends")]),t._v(".\nRoutes are created using requests fields ("),s("code",[t._v("Host")]),t._v(", "),s("code",[t._v("Path")]),t._v(", "),s("code",[t._v("Headers")]),t._v("...) and can match or not a request.")]),t._v(" "),s("li",[t._v("The "),s("a",{attrs:{href:"#frontends"}},[t._v("frontend")]),t._v(" will then send the request to a "),s("a",{attrs:{href:"#backends"}},[t._v("backend")]),t._v(". A backend can be composed by one or more "),s("a",{attrs:{href:"#servers"}},[t._v("servers")]),t._v(", and by a load-balancing strategy.")]),t._v(" "),s("li",[t._v("Finally, the "),s("a",{attrs:{href:"#servers"}},[t._v("server")]),t._v(" will forward the request to the corresponding microservice in the private network.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"entrypoints"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#entrypoints","aria-hidden":"true"}},[this._v("#")]),this._v(" Entrypoints")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("a port (80, 443...)")]),t._v(" "),s("li",[t._v("SSL (Certificates, Keys, authentication with a client certificate signed by a trusted CA...)")]),t._v(" "),s("li",[t._v("redirection to another entrypoint (redirect "),s("code",[t._v("HTTP")]),t._v(" to "),s("code",[t._v("HTTPS")]),t._v(")")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.http]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.http.redirect]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    entryPoint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [[entryPoints.https.tls.certificates]")]),t._v("]\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      certFile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "tests/traefik.crt"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      keyFile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "tests/traefik.key"')]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Two entrypoints are defined "),s("code",[t._v("http")]),t._v(" and "),s("code",[t._v("https")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("http")]),t._v(" listens on port "),s("code",[t._v("80")]),t._v(" and "),s("code",[t._v("https")]),t._v(" on port "),s("code",[t._v("443")]),t._v(".")]),t._v(" "),s("li",[t._v("We enable SSL on "),s("code",[t._v("https")]),t._v(" by giving a certificate and a key.")]),t._v(" "),s("li",[t._v("We also redirect all the traffic from entrypoint "),s("code",[t._v("http")]),t._v(" to "),s("code",[t._v("https")]),t._v(".")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":443"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [entryPoints.https.tls]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.https.tls.ClientCA]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    files")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["tests/clientca1.crt", "tests/clientca2.crt"]')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    optional")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [[entryPoints.https.tls.certificates]")]),t._v("]\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    certFile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "tests/traefik.crt"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    keyFile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "tests/traefik.key"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("We enable SSL on "),e("code",[this._v("https")]),this._v(" by giving a certificate and a key.")]),this._v(" "),e("li",[this._v("One or several files containing Certificate Authorities in PEM format are added.")]),this._v(" "),e("li",[this._v("It is possible to have multiple CA:s in the same file or keep them in separate files.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"frontends"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontends","aria-hidden":"true"}},[this._v("#")]),this._v(" Frontends")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"modifiers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modifiers","aria-hidden":"true"}},[this._v("#")]),this._v(" Modifiers")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("AddPrefix: /products")]),t._v(": Add path prefix to the existing request path prior to forwarding the request to the backend.")]),t._v(" "),s("li",[s("code",[t._v("ReplacePath: /serverless-path")]),t._v(": Replaces the path and adds the old path to the "),s("code",[t._v("X-Replaced-Path")]),t._v(" header. Useful for mapping to AWS Lambda or Google Cloud Functions.")]),t._v(" "),s("li",[s("code",[t._v("ReplacePathRegex: ^/api/v2/(.*) /api/$1")]),t._v(": Replaces the path with a regular expression and adds the old path to the "),s("code",[t._v("X-Replaced-Path")]),t._v(" header. Separate the regular expression and the replacement by a space.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"matchers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#matchers","aria-hidden":"true"}},[this._v("#")]),this._v(" Matchers")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v(",")]),t._v(" is the "),s("code",[t._v("OR")]),t._v(" operator (works "),s("strong",[t._v("only inside a matcher")]),t._v(", ex: "),s("code",[t._v("Host:foo.com,bar.com")]),t._v(").\n"),s("ul",[s("li",[t._v("i.e., forward a request if any rule matches.")]),t._v(" "),s("li",[t._v("Does not work for "),s("code",[t._v("Headers")]),t._v(" and "),s("code",[t._v("HeadersRegexp")]),t._v(".")])])]),t._v(" "),s("li",[s("code",[t._v(";")]),t._v(" is the "),s("code",[t._v("AND")]),t._v(" operator (works "),s("strong",[t._v("only between matchers")]),t._v(", ex: "),s("code",[t._v("Host:foo.com;Path:/bar")]),t._v(")\n"),s("ul",[s("li",[t._v("i.e., forward a request if all rules match")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("Matcher")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("Headers: Content-Type, application/json")])]),t._v(" "),s("td",[t._v("Match HTTP header. It accepts a comma-separated key/value pair where both key and value must be literals.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("HeadersRegexp: Content-Type, application/(text/json)")])]),t._v(" "),s("td",[t._v("Match HTTP header. It accepts a comma-separated key/value pair where the key must be a literal and the value may be a literal or a regular expression.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Host: traefik.io, www.traefik.io")])]),t._v(" "),s("td",[t._v("Match request host. It accepts a sequence of literal hosts.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("HostRegexp: traefik.io, {subdomain:[a-z]+}.traefik.io")])]),t._v(" "),s("td",[t._v("Match request host. It accepts a sequence of literal and regular expression hosts.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Method: GET, POST, PUT")])]),t._v(" "),s("td",[t._v("Match request HTTP method. It accepts a sequence of HTTP methods.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Path: /products/, /articles/{category}/{id:[0-9]+}")])]),t._v(" "),s("td",[t._v("Match exact request path. It accepts a sequence of literal and regular expression paths.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("PathStrip: /products/")])]),t._v(" "),s("td",[t._v("Match exact path and strip off the path prior to forwarding the request to the backend. It accepts a sequence of literal paths.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("PathStripRegex: /articles/{category}/{id:[0-9]+}")])]),t._v(" "),s("td",[t._v("Match exact path and strip off the path prior to forwarding the request to the backend. It accepts a sequence of literal and regular expression paths.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("PathPrefix: /products/, /articles/{category}/{id:[0-9]+}")])]),t._v(" "),s("td",[t._v("Match request prefix path. It accepts a sequence of literal and regular expression prefix paths.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("PathPrefixStrip: /products/")])]),t._v(" "),s("td",[t._v("Match request prefix path and strip off the path prefix prior to forwarding the request to the backend. It accepts a sequence of literal prefix paths. Starting with Traefik 1.3, the stripped prefix path will be available in the "),s("code",[t._v("X-Forwarded-Prefix")]),t._v(" header.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("PathPrefixStripRegex: /articles/{category}/{id:[0-9]+}")])]),t._v(" "),s("td",[t._v("Match request prefix path and strip off the path prefix prior to forwarding the request to the backend. It accepts a sequence of literal and regular expression prefix paths. Starting with Traefik 1.3, the stripped prefix path will be available in the "),s("code",[t._v("X-Forwarded-Prefix")]),t._v(" header.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Query: foo=bar, bar=baz")])]),t._v(" "),s("td",[t._v("Match Query String parameters. It accepts a sequence of key=value pairs.")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You can optionally enable "),e("code",[this._v("passHostHeader")]),this._v(" to forward client "),e("code",[this._v("Host")]),this._v(" header to the backend.\nYou can also optionally configure the "),e("code",[this._v("passTLSClientCert")]),this._v(" option to pass the Client certificates to the backend in a specific header.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"path-matcher-usage-guidelines"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#path-matcher-usage-guidelines","aria-hidden":"true"}},[this._v("#")]),this._v(" Path Matcher Usage Guidelines")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Use "),s("code",[t._v("Path")]),t._v(" if your backend listens on the exact path only. For instance, "),s("code",[t._v("Path: /products")]),t._v(" would match "),s("code",[t._v("/products")]),t._v(" but not "),s("code",[t._v("/products/shoes")]),t._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Use a "),s("code",[t._v("*Prefix*")]),t._v(" matcher if your backend listens on a particular base path but also serves requests on sub-paths.\nFor instance, "),s("code",[t._v("PathPrefix: /products")]),t._v(" would match "),s("code",[t._v("/products")]),t._v(" but also "),s("code",[t._v("/products/shoes")]),t._v(" and "),s("code",[t._v("/products/shirts")]),t._v(".\nSince the path is forwarded as-is, your backend is expected to listen on "),s("code",[t._v("/products")]),t._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Use a "),s("code",[t._v("*Strip")]),t._v(" matcher if your backend listens on the root path ("),s("code",[t._v("/")]),t._v(") but should be routeable on a specific prefix.\nFor instance, "),s("code",[t._v("PathPrefixStrip: /products")]),t._v(" would match "),s("code",[t._v("/products")]),t._v(" but also "),s("code",[t._v("/products/shoes")]),t._v(" and "),s("code",[t._v("/products/shirts")]),t._v("."),s("br"),t._v("\nSince the path is stripped prior to forwarding, your backend is expected to listen on "),s("code",[t._v("/")]),t._v("."),s("br"),t._v("\nIf your backend is serving assets (e.g., images or Javascript files), chances are it must return properly constructed relative URLs."),s("br"),t._v("\nContinuing on the example, the backend should return "),s("code",[t._v("/products/shoes/image.png")]),t._v(" (and not "),s("code",[t._v("/images.png")]),t._v(" which Traefik would likely not be able to associate with the same backend)."),s("br"),t._v("\nThe "),s("code",[t._v("X-Forwarded-Prefix")]),t._v(" header (available since Traefik 1.3) can be queried to build such URLs dynamically.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"examples"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[this._v("#")]),this._v(" Examples")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[frontends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Host:test.localhost,test2.localhost"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  passHostHeader")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend2.passTLSClientCert]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    pem")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  priority")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  entrypoints")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["https"] # overrides defaultEntryPoints')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend2.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "HostRegexp:localhost,{subdomain:[a-z]+}.localhost"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend3]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend3.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Host:test3.localhost;Path:/test"')]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Three frontends are defined: "),s("code",[t._v("frontend1")]),t._v(", "),s("code",[t._v("frontend2")]),t._v(" and "),s("code",[t._v("frontend3")])]),t._v(" "),s("li",[s("code",[t._v("frontend1")]),t._v(" will forward the traffic to the "),s("code",[t._v("backend2")]),t._v(" if the rule "),s("code",[t._v("Host:test.localhost,test2.localhost")]),t._v(" is matched")]),t._v(" "),s("li",[s("code",[t._v("frontend2")]),t._v(" will forward the traffic to the "),s("code",[t._v("backend1")]),t._v(" if the rule "),s("code",[t._v("HostRegexp:localhost,{subdomain:[a-z]+}.localhost")]),t._v(" is matched (forwarding client "),s("code",[t._v("Host")]),t._v(" header to the backend)")]),t._v(" "),s("li",[s("code",[t._v("frontend3")]),t._v(" will forward the traffic to the "),s("code",[t._v("backend2")]),t._v(" if the rules "),s("code",[t._v("Host:test3.localhost")]),t._v(" "),s("strong",[t._v("AND")]),t._v(" "),s("code",[t._v("Path:/test")]),t._v(" are matched")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"combining-multiple-rules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#combining-multiple-rules","aria-hidden":"true"}},[this._v("#")]),this._v(" Combining multiple rules")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend3]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend3.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Host:test3.localhost"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend3.routes.test_2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Path:/test"')]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Here "),s("code",[t._v("frontend3")]),t._v(" will forward the traffic to the "),s("code",[t._v("backend2")]),t._v(" if the rules "),s("code",[t._v("Host:test3.localhost")]),t._v(" "),s("strong",[t._v("AND")]),t._v(" "),s("code",[t._v("Path:/test")]),t._v(" are matched.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You can also use the notation using a "),e("code",[this._v(";")]),this._v(" separator, same result:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend3]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend3.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Host:test3.localhost;Path:/test"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Finally, you can create a rule to bind multiple domains or Path to a frontend, using the "),e("code",[this._v(",")]),this._v(" separator:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(" [frontends.frontend2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend2.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Host:test1.localhost,test2.localhost"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend3]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend3.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "Path:/test1,/test2"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"rules-order"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules-order","aria-hidden":"true"}},[this._v("#")]),this._v(" Rules Order")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("When combining "),s("code",[t._v("Modifier")]),t._v(" rules with "),s("code",[t._v("Matcher")]),t._v(" rules, it is important to remember that "),s("code",[t._v("Modifier")]),t._v(" rules "),s("strong",[t._v("ALWAYS")]),t._v(" apply after the "),s("code",[t._v("Matcher")]),t._v(" rules.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("The following rules are both "),s("code",[t._v("Matchers")]),t._v(" and "),s("code",[t._v("Modifiers")]),t._v(", so the "),s("code",[t._v("Matcher")]),t._v(" portion of the rule will apply first, and the "),s("code",[t._v("Modifier")]),t._v(" will apply later.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("PathStrip")])]),this._v(" "),e("li",[e("code",[this._v("PathStripRegex")])]),this._v(" "),e("li",[e("code",[this._v("PathPrefixStrip")])]),this._v(" "),e("li",[e("code",[this._v("PathPrefixStripRegex")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("Modifiers")]),this._v(" will be applied in a pre-determined order regardless of their order in the "),e("code",[this._v("rule")]),this._v(" configuration section.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[s("code",[t._v("PathStrip")])]),t._v(" "),s("li",[s("code",[t._v("PathPrefixStrip")])]),t._v(" "),s("li",[s("code",[t._v("PathStripRegex")])]),t._v(" "),s("li",[s("code",[t._v("PathPrefixStripRegex")])]),t._v(" "),s("li",[s("code",[t._v("AddPrefix")])]),t._v(" "),s("li",[s("code",[t._v("ReplacePath")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"priorities"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#priorities","aria-hidden":"true"}},[this._v("#")]),this._v(" Priorities")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("By default, routes will be sorted (in descending order) using rules length (to avoid path overlap):\n"),e("code",[this._v("PathPrefix:/foo;Host:foo.com")]),this._v(" (length == 28) will be matched before "),e("code",[this._v("PathPrefixStrip:/foobar")]),this._v(" (length == 23) will be matched before "),e("code",[this._v("PathPrefix:/foo,/bar")]),this._v(" (length == 20).")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    priority")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 20")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    passHostHeader")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [frontends.frontend1.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "PathPrefix:/to"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    passHostHeader")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [frontends.frontend2.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "PathPrefix:/toto"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Here, "),e("code",[this._v("frontend1")]),this._v(" will be matched before "),e("code",[this._v("frontend2")]),this._v(" ("),e("code",[this._v("20 > 16")]),this._v(").")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"custom-headers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-headers","aria-hidden":"true"}},[this._v("#")]),this._v(" Custom headers")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Custom headers can be configured through the frontends, to add headers to either requests or responses that match the frontend's rules.\nThis allows for setting headers such as "),e("code",[this._v("X-Script-Name")]),this._v(" to be added to the request, or custom headers to be added to the response.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In this example, all matches to the path "),e("code",[this._v("/cheese")]),this._v(" will have the "),e("code",[this._v("X-Script-Name")]),this._v(" header added to the proxied request and the "),e("code",[this._v("X-Custom-Response-Header")]),this._v(" header added to the response.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[frontends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.headers.customresponseheaders]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    X-Custom-Response-Header")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "True"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.headers.customrequestheaders]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    X-Script-Name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "PathPrefixStrip:/cheese"')]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("In this second  example, all matches to the path "),s("code",[t._v("/cheese")]),t._v(" will have the "),s("code",[t._v("X-Script-Name")]),t._v(" header added to the proxied request, the "),s("code",[t._v("X-Custom-Request-Header")]),t._v(" header removed from the request, and the "),s("code",[t._v("X-Custom-Response-Header")]),t._v(" header removed from the response.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[frontends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.headers.customresponseheaders]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    X-Custom-Response-Header")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ""')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.headers.customrequestheaders]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    X-Script-Name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "test"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    X-Custom-Request-Header")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ""')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "PathPrefixStrip:/cheese"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"security-headers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#security-headers","aria-hidden":"true"}},[this._v("#")]),this._v(" Security headers")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[frontends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.headers]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    FrameDeny")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend1.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "PathPrefixStrip:/cheddar"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [frontends.frontend2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "backend2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend2.headers]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    SSLRedirect")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [frontends.frontend2.routes.test_1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    rule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "PathPrefixStrip:/stilton"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In this example, traffic routed through the first frontend will have the "),e("code",[this._v("X-Frame-Options")]),this._v(" header set to "),e("code",[this._v("DENY")]),this._v(", and the second will only allow HTTPS request through, otherwise will return a 301 HTTPS redirect.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"backends"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#backends","aria-hidden":"true"}},[this._v("#")]),this._v(" Backends")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"servers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#servers","aria-hidden":"true"}},[this._v("#")]),this._v(" Servers")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Servers are simply defined using a "),e("code",[this._v("url")]),this._v(". You can also apply a custom "),e("code",[this._v("weight")]),this._v(" to each server (this will be used by load-balancing).")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("Paths in "),e("code",[this._v("url")]),this._v(" are ignored. Use "),e("code",[this._v("Modifier")]),this._v(" to specify paths instead.")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n    # ...\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.servers.server1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http://172.17.0.2:80"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    weight")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.servers.server2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http://172.17.0.3:80"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    weight")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend2]")]),t._v("\n    # ...\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend2.servers.server1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https://172.17.0.4:443"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    weight")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend2.servers.server2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "https://172.17.0.5:443"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    weight")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend3]")]),t._v("\n    # ...\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend3.servers.server1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "h2c://172.17.0.6:80"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    weight")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 1")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Two backends are defined: "),s("code",[t._v("backend1")]),t._v(" and "),s("code",[t._v("backend2")])]),t._v(" "),s("li",[s("code",[t._v("backend1")]),t._v(" will forward the traffic to two servers: "),s("code",[t._v("172.17.0.2:80")]),t._v(" with weight "),s("code",[t._v("10")]),t._v(" and "),s("code",[t._v("172.17.0.3:80")]),t._v(" with weight "),s("code",[t._v("1")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("backend2")]),t._v(" will forward the traffic to two servers: "),s("code",[t._v("172.17.0.4:443")]),t._v(" with weight "),s("code",[t._v("1")]),t._v(" and "),s("code",[t._v("172.17.0.5:443")]),t._v(" with weight "),s("code",[t._v("2")]),t._v(" both using TLS.")]),t._v(" "),s("li",[s("code",[t._v("backend3")]),t._v(" will forward the traffic to: "),s("code",[t._v("172.17.0.6:80")]),t._v(" with weight "),s("code",[t._v("1")]),t._v(" using HTTP2 without TLS.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"load-balancing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#load-balancing","aria-hidden":"true"}},[this._v("#")]),this._v(" Load-balancing")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("wrr")]),this._v(": Weighted Round Robin.")]),this._v(" "),e("li",[e("code",[this._v("drr")]),this._v(": Dynamic Round Robin: increases weights on servers that perform better than others.\nIt also rolls back to original weights if the servers have changed.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"circuit-breakers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#circuit-breakers","aria-hidden":"true"}},[this._v("#")]),this._v(" Circuit breakers")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Methods: "),s("code",[t._v("LatencyAtQuantileMS")]),t._v(", "),s("code",[t._v("NetworkErrorRatio")]),t._v(", "),s("code",[t._v("ResponseCodeRatio")])]),t._v(" "),s("li",[t._v("Operators:  "),s("code",[t._v("AND")]),t._v(", "),s("code",[t._v("OR")]),t._v(", "),s("code",[t._v("EQ")]),t._v(", "),s("code",[t._v("NEQ")]),t._v(", "),s("code",[t._v("LT")]),t._v(", "),s("code",[t._v("LE")]),t._v(", "),s("code",[t._v("GT")]),t._v(", "),s("code",[t._v("GE")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("NetworkErrorRatio() > 0.5")]),t._v(": watch error ratio over 10 second sliding window for a frontend.")]),t._v(" "),s("li",[s("code",[t._v("LatencyAtQuantileMS(50.0) > 50")]),t._v(":  watch latency at quantile in milliseconds.")]),t._v(" "),s("li",[s("code",[t._v("ResponseCodeRatio(500, 600, 0, 600) > 0.5")]),t._v(": ratio of response codes in ranges [500-600) and [0-600).")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.circuitbreaker]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    expression")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "NetworkErrorRatio() > 0.5"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.servers.server1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http://172.17.0.2:80"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    weight")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.servers.server2]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http://172.17.0.3:80"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    weight")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 1")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("backend1")]),t._v(" will forward the traffic to two servers: "),s("code",[t._v('http://172.17.0.2:80"')]),t._v(" with weight "),s("code",[t._v("10")]),t._v(" and "),s("code",[t._v("http://172.17.0.3:80")]),t._v(" with weight "),s("code",[t._v("1")]),t._v(" using default "),s("code",[t._v("wrr")]),t._v(" load-balancing strategy.")]),t._v(" "),s("li",[t._v("a circuit breaker is added on "),s("code",[t._v("backend1")]),t._v(" using the expression "),s("code",[t._v("NetworkErrorRatio() > 0.5")]),t._v(": watch error ratio over 10 second sliding window")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"maximum-connections"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#maximum-connections","aria-hidden":"true"}},[this._v("#")]),this._v(" Maximum connections")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Maximum connections can be configured by specifying an integer value for "),e("code",[this._v("maxconn.amount")]),this._v(" and "),e("code",[this._v("maxconn.extractorfunc")]),this._v(" which is a strategy used to determine how to categorize requests in order to evaluate the maximum connections.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.maxconn]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("       amount")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("       extractorfunc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "request.host"')]),t._v("\n   # ...\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("backend1")]),t._v(" will return "),s("code",[t._v("HTTP code 429 Too Many Requests")]),t._v(" if there are already 10 requests in progress for the same Host header.")]),t._v(" "),s("li",[t._v("Another possible value for "),s("code",[t._v("extractorfunc")]),t._v(" is "),s("code",[t._v("client.ip")]),t._v(" which will categorize requests based on client source ip.")]),t._v(" "),s("li",[t._v("Lastly "),s("code",[t._v("extractorfunc")]),t._v(" can take the value of "),s("code",[t._v("request.header.ANY_HEADER")]),t._v(" which will categorize requests based on "),s("code",[t._v("ANY_HEADER")]),t._v(" that you provide.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"sticky-sessions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sticky-sessions","aria-hidden":"true"}},[this._v("#")]),this._v(" Sticky sessions")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Sticky sessions are supported with both load balancers."),e("br"),this._v("\nWhen sticky sessions are enabled, a cookie is set on the initial request.\nThe default cookie name is an abbreviation of a sha1 (ex: "),e("code",[this._v("_1d52e")]),this._v(").\nOn subsequent requests, the client will be directed to the backend stored in the cookie if it is still healthy.\nIf not, a new backend will be assigned.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n    # Enable sticky session\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.loadbalancer.stickiness]")]),t._v("\n\n    # Customize the cookie name\n    #\n    # Optional\n    # Default: a sha1 (6 chars)\n    #\n    #  cookieName "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "my_cookie"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"health-check"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#health-check","aria-hidden":"true"}},[this._v("#")]),this._v(" Health Check")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A recovering backend returning "),e("code",[this._v("2xx")]),this._v(" or "),e("code",[this._v("3xx")]),this._v(" responses again is being returned to the LB rotation pool.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.healthcheck]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    path")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "/health"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    interval")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "10s"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "3s"')]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.healthcheck]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    path")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "/health"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    interval")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "10s"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "3s"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 8080")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.healthcheck]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    path")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "/health"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    interval")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "10s"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "3s"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    scheme")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "http"')]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[backends]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [backends.backend1]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [backends.backend1.healthcheck]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    path")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "/health"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    interval")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "10s"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "3s"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    hostname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "myhost.com"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 8080")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("      [backends.backend1.healthcheck.headers]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      My-Custom-Header")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "foo"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("      My-Header")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "bar"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("The "),e("a",{attrs:{href:"/basics#static-traefik-configuration"}},[this._v("static Traefik configuration")]),this._v(" which is loaded only at the beginning.")]),this._v(" "),e("li",[this._v("The "),e("a",{attrs:{href:"/basics#dynamic-traefik-configuration"}},[this._v("dynamic Traefik configuration")]),this._v(" which can be hot-reloaded (no need to restart the process).")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"static-traefik-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#static-traefik-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Static Traefik configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("the provider-enabling argument parameters (e.g., "),e("code",[this._v("--docker")]),this._v(") set all default values for the specific provider.\nIt must not be used if a configuration source with less precedence wants to set a non-default provider value.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"configuration-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration-file","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration file")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("By default, Traefik will try to find a "),e("code",[this._v("traefik.toml")]),this._v(" in the following places:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("/etc/traefik/")])]),this._v(" "),e("li",[e("code",[this._v("$HOME/.traefik/")])]),this._v(" "),e("li",[e("code",[this._v(".")]),this._v(" "),e("em",[this._v("the working directory")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You can override this by setting a "),e("code",[this._v("configFile")]),this._v(" argument:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("traefik --configFile"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("foo/bar/myconfigfile.toml\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"arguments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#arguments","aria-hidden":"true"}},[this._v("#")]),this._v(" Arguments")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("traefik --help\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"key-value-stores"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#key-value-stores","aria-hidden":"true"}},[this._v("#")]),this._v(" Key-value stores")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"dynamic-traefik-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-traefik-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Dynamic Traefik configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Traefik can hot-reload those rules which could be provided by "),e("a",{attrs:{href:"/configuration/commons"}},[this._v("multiple configuration backends")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We only need to enable "),e("code",[this._v("watch")]),this._v(" option to make Traefik watch configuration backend changes and generate its configuration automatically.\nRoutes to services will be created and updated instantly at any changes.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commands","aria-hidden":"true"}},[this._v("#")]),this._v(" Commands")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"traefik"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#traefik","aria-hidden":"true"}},[this._v("#")]),this._v(" traefik")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("traefik "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--flag"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("flag_argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("version")]),this._v(" : Print version")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("bug")]),this._v(": The easiest way to submit a pre-filled issue.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("healthcheck")]),this._v(": Calls Traefik "),e("code",[this._v("/ping")]),this._v(" to check health.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("traefik "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v("[")]),this._v("command"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v("]")]),this._v(" --help\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("traefik --help\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or")]),t._v("\n\ndocker run traefik"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(":version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" --help\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ex: docker run traefik:1.5 --help")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"command-bug"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-bug","aria-hidden":"true"}},[this._v("#")]),this._v(" Command: bug")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("traefik bug\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"command-healthcheck"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-healthcheck","aria-hidden":"true"}},[this._v("#")]),this._v(" Command: healthcheck")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This command allows to check the health of Traefik. Its exit status is "),e("code",[this._v("0")]),this._v(" if Traefik is healthy and "),e("code",[this._v("1")]),this._v(" if it is unhealthy.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("The "),s("a",{attrs:{href:"/configuration/ping"}},[s("code",[t._v("ping")])]),t._v(" must be enabled to allow the "),s("code",[t._v("healthcheck")]),t._v(" command to call "),s("code",[t._v("/ping")]),t._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("traefik healthcheck\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("OK: http://:8082/ping\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"collected-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#collected-data","aria-hidden":"true"}},[this._v("#")]),this._v(" Collected Data")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("This feature is disabled by default.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"why"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#why","aria-hidden":"true"}},[this._v("#")]),this._v(" Why ?")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"what"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what","aria-hidden":"true"}},[this._v("#")]),this._v(" What ?")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("the Traefik version")]),t._v(" "),s("li",[t._v("a hash of the configuration")]),t._v(" "),s("li",[t._v("an "),s("strong",[t._v("anonymous version")]),t._v(" of the static configuration:\n"),s("ul",[s("li",[t._v("token, user name, password, URL, IP, domain, email, etc, are removed")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("We do not collect the dynamic configuration (frontends & backends).")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("We do not collect data behind the scenes to run advertising programs or to sell such data to third-party.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"here-is-an-example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#here-is-an-example","aria-hidden":"true"}},[this._v("#")]),this._v(" Here is an example")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Source configuration:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.http]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("       address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[api]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[Docker]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  endpoint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "tcp://10.10.10.10:2375"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  domain")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "foo.bir"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  exposedByDefault")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  swarmMode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [Docker.TLS]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    ca")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "dockerCA"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    cert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "dockerCert"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "dockerKey"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    insecureSkipVerify")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[ECS]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  domain")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "foo.bar"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  exposedByDefault")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  clusters")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ["foo-bar"]')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  region")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "us-west-2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  accessKeyID")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "AccessKeyID"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  secretAccessKey")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "SecretAccessKey"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Obfuscated and anonymous configuration:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[entryPoints]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("    [entryPoints.http]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("       address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' ":80"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[api]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[Docker]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  endpoint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  domain")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  exposedByDefault")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  swarmMode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("  [Docker.TLS]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    ca")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    cert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("    insecureSkipVerify")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[ECS]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  domain")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  exposedByDefault")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  clusters")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" []")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  region")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "us-west-2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  accessKeyID")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("  secretAccessKey")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(' "xxxx"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"show-me-the-code"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#show-me-the-code","aria-hidden":"true"}},[this._v("#")]),this._v(" Show me the code !")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("By default we anonymize all configuration fields, except fields tagged with "),e("code",[this._v("export=true")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"how-to-enable-this"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-enable-this","aria-hidden":"true"}},[this._v("#")]),this._v(" How to enable this ?")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("adding this line in the configuration TOML file:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[this._v("# Send anonymous usage data\n#\n# Optional\n# Default: false\n#\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[this._v("sendAnonymousUsage")]),this._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v("=")]),this._v(" true")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("adding this flag in the CLI:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("./traefik --sendAnonymousUsage"),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("true\n")])])])}],!1,null,null,null);e.default=n.exports}}]);